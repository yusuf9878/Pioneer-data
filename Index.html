<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
        }
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin: 10px;
            padding: 20px;
            width: calc(33.333% - 40px);
            box-sizing: border-box;
            transition: background-color 0.3s;
        }
        .card img {
            max-width: 100%;
            border-radius: 8px;
        }
        .card button {
            margin-top: 10px;
            padding: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .pending { background-color: #ffc107; }
        .frame-ready { background-color: #17a2b8; }
        .confirm { background-color: #28a745; color: white; }
        .confirm:disabled { background-color: #ccc; }
    </style>
</head>
<body>

<div id="cardContainer">
    <!-- Cards will be dynamically generated here -->
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.1.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.1.2/firebase-firestore.js"></script>

<script>
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDq1HOD-Aj9enPFMXnTecX-9p3HVe7jAJM",
  authDomain: "furniture-data-6dfed.firebaseapp.com",
  projectId: "furniture-data-6dfed",
  storageBucket: "furniture-data-6dfed.firebasestorage.app",
  messagingSenderId: "362514009921",
  appId: "1:362514009921:web:3671e5179954193eb49bc0",
  measurementId: "G-9VZ348MYPX"
};

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.getFirestore(app);

    const cardContainer = document.getElementById('cardContainer');

    function createCard(data) {
        const card = document.createElement('div');
        card.className = 'card';

        if (data.photoURL) {
            const img = document.createElement('img');
            img.src = data.photoURL;
            card.appendChild(img);
        }

        const nameText = document.createElement('p');
        nameText.textContent = "Name: " + data.name;
        card.appendChild(nameText);

        const sizeText = document.createElement('p');
        sizeText.textContent = "Size: " + data.size;
        card.appendChild(sizeText);

        const dueDateText = document.createElement('p');
        dueDateText.textContent = "Due Date: " + data.dueDate;
        card.appendChild(dueDateText);

        if (data.urgent) {
            const urgentText = document.createElement('p');
            urgentText.textContent = "Urgent: " + data.urgent;
            card.appendChild(urgentText);
        }

        const pendingButton = document.createElement('button');
        pendingButton.textContent = 'Pending';
        pendingButton.className = 'pending';
        card.appendChild(pendingButton);

        const frameReadyButton = document.createElement('button');
        frameReadyButton.textContent = 'Frame Ready';
        frameReadyButton.className = 'frame-ready';
        card.appendChild(frameReadyButton);

        const confirmButton = document.createElement('button');
        confirmButton.textContent = 'Confirm';
        confirmButton.className = 'confirm';
        confirmButton.disabled = true;
        card.appendChild(confirmButton);

        frameReadyButton.onclick = function() {
            confirmButton.disabled = false;
        };

        confirmButton.onclick = function() {
            card.style.backgroundColor = '#d4edda'; // Light green
        };

        cardContainer.appendChild(card);
    }

    // Fetch data from Firestore and create cards
    firebase.getDocs(firebase.collection(db, 'cards')).then(snapshot => {
        snapshot.forEach(doc => {
            createCard(doc.data());
        });
    }).catch(error => {
        console.error("Error fetching data: ", error);
    });
</script>

</body>
</html>